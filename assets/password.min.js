window.theme=window.theme||{};
theme.a11y={trapFocus:function(b){var a=b.namespace?"focusin."+b.namespace:"focusin",c=b.namespace?"focusout."+b.namespace:"focusout",d=b.namespace?"keydown."+b.namespace:"keydown.handleFocus",e=b.$container.find($('button, [href], input, select, textarea, [tabindex]:not([tabindex^="-"])').filter(":visible")),g=e[0],h=e[e.length-1];b.$elementToFocus||(b.$elementToFocus=b.$container);b.$container.attr("tabindex","-1");b.$elementToFocus.focus();$(document).off("focusin");$(document).on(c,function(){$(document).off(d)});
$(document).on(a,function(k){if(k.target===h||k.target===g)$(document).on(d,function(f){9===f.keyCode&&(f.target!==h||f.shiftKey||(f.preventDefault(),g.focus()),f.target===g&&f.shiftKey&&(f.preventDefault(),h.focus()))})})},removeTrapFocus:function(b){var a=b.namespace?"focusin."+b.namespace:"focusin";b.$container&&b.$container.length&&b.$container.removeAttr("tabindex");$(document).off(a)},lockMobileScrolling:function(b,a){(a?a:$(document.documentElement).add("body")).on("touchmove"+b,function(){return!1})},
unlockMobileScrolling:function(b,a){(a?a:$(document.documentElement).add("body")).off(b)}};theme.Sections=function(){this.constructors={};this.instances=[];$(document).on("shopify:section:load",this._onSectionLoad.bind(this)).on("shopify:section:unload",this._onSectionUnload.bind(this)).on("shopify:section:select",this._onSelect.bind(this)).on("shopify:section:deselect",this._onDeselect.bind(this)).on("shopify:block:select",this._onBlockSelect.bind(this)).on("shopify:block:deselect",this._onBlockDeselect.bind(this))};
theme.Sections.prototype=$.extend({},theme.Sections.prototype,{createInstance:function(b,a,c){var d=$(b),e=d.attr("data-section-id");d=d.attr("data-section-type");a=a||this.constructors[d];"undefined"===typeof a||c&&this._findInstance(e)||(b=$.extend(new a(b),{id:e,type:d,container:b}),this.instances.push(b))},_onSectionLoad:function(b,a,c){AOS&&AOS.refreshHard();var d=a?a:$("[data-section-id]",b.target)[0];if(d&&(this.createInstance(d),c=a?c:this._findInstance(b.detail.sectionId),a||this._loadSubSections(),
c&&"function"===typeof c.onLoad))c.onLoad(b)},_loadSubSections:function(){AOS&&AOS.refreshHard();$("[data-subsection]").each(function(b,a){this._onSectionLoad(null,a,$(a).data("section-id"))}.bind(this))},_onSectionUnload:function(b){var a=this._removeInstance(b.detail.sectionId);if(a&&"function"===typeof a.onUnload)a.onUnload(b)},_onSelect:function(b){var a=this._findInstance(b.detail.sectionId);if(a&&"function"===typeof a.onSelect)a.onSelect(b)},_onDeselect:function(b){var a=this._findInstance(b.detail.sectionId);
if(a&&"function"===typeof a.onDeselect)a.onDeselect(b)},_onBlockSelect:function(b){var a=this._findInstance(b.detail.sectionId);if(a&&"function"===typeof a.onBlockSelect)a.onBlockSelect(b)},_onBlockDeselect:function(b){var a=this._findInstance(b.detail.sectionId);if(a&&"function"===typeof a.onBlockDeselect)a.onBlockDeselect(b)},_findInstance:function(b){for(var a=0;a<this.instances.length;a++)if(this.instances[a].id===b)return this.instances[a]},_removeInstance:function(b){for(var a=this.instances.length,
c;a--;)if(this.instances[a].id===b){c=this.instances[a];this.instances.splice(a,1);break}return c},register:function(b,a,c){this.constructors[b]=a;var d=$("[data-section-type="+b+"]");c&&(d=$("[data-section-type="+b+"]",c));d.each(function(e,g){this.createInstance(g,a,c)}.bind(this))}});
theme.Modals=function(){function b(a,c,d){c={close:".js-modal-close",open:".js-modal-open-"+c,openClass:"modal--is-active",closingClass:"modal--is-closing",bodyOpenClass:"modal-open",bodyOpenSolidClass:"modal-open--solid",bodyClosingClass:"modal-closing",closeOffContentClick:!0};this.id=a;this.$modal=$("#"+a);if(!this.$modal.length)return!1;this.nodes={$parent:$("html").add("body"),$modalContent:this.$modal.find(".modal__inner")};this.config=$.extend(c,d);this.modalIsOpen=!1;this.$focusOnOpen=this.config.focusOnOpen?
$(this.config.focusOnOpen):this.$modal;this.isSolid=this.config.solid;this.init()}b.prototype.init=function(){$(this.config.open).attr("aria-expanded","false");$(this.config.open).on("click",this.open.bind(this));this.$modal.find(this.config.close).on("click",this.close.bind(this));$("body").on("drawerOpen",function(){this.close()}.bind(this))};b.prototype.open=function(a){var c=!1;this.modalIsOpen||(a?a.preventDefault():c=!0,a&&a.stopPropagation&&(a.stopPropagation(),this.$activeSource=$(a.currentTarget).attr("aria-expanded",
"true")),this.modalIsOpen&&!c&&this.close(),this.$modal.prepareTransition().addClass(this.config.openClass),this.nodes.$parent.addClass(this.config.bodyOpenClass),this.isSolid&&this.nodes.$parent.addClass(this.config.bodyOpenSolidClass),this.modalIsOpen=!0,theme.a11y.trapFocus({$container:this.$modal,$elementToFocus:this.$focusOnOpen,namespace:"modal_focus"}),$("body").trigger("productModalOpen").trigger("modalOpen."+this.id),this.bindEvents())};b.prototype.close=function(){this.modalIsOpen&&($(document.activeElement).trigger("blur"),
this.$modal.prepareTransition().removeClass(this.config.openClass).addClass(this.config.closingClass),this.nodes.$parent.removeClass(this.config.bodyOpenClass),this.nodes.$parent.addClass(this.config.bodyClosingClass),window.setTimeout(function(){this.nodes.$parent.removeClass(this.config.bodyClosingClass);this.$modal.removeClass(this.config.closingClass);this.$activeSource&&this.$activeSource.attr("aria-expanded")&&this.$activeSource.attr("aria-expanded","false").focus()}.bind(this),550),this.isSolid&&
this.nodes.$parent.removeClass(this.config.bodyOpenSolidClass),this.modalIsOpen=!1,theme.a11y.removeTrapFocus({$container:this.$modal,namespace:"modal_focus"}),$("body").trigger("modalClose."+this.id),this.unbindEvents())};b.prototype.bindEvents=function(){this.nodes.$parent.on("keyup.modal",function(a){27===a.keyCode&&this.close()}.bind(this));this.config.closeOffContentClick&&(this.$modal.on("click.modal",this.close.bind(this)),this.nodes.$modalContent.on("click.modal",function(a){a.stopImmediatePropagation()}))};
b.prototype.unbindEvents=function(){this.nodes.$parent.off(".modal");this.config.closeOffContentClick&&(this.$modal.off(".modal"),this.nodes.$modalContent.off(".modal"))};return b}();theme.PasswordHeader=function(){function b(){this.init()}b.prototype=$.extend({},b.prototype,{init:function(){var a=$("#LoginModal");if(a.length){var c=new theme.Modals("LoginModal","login-modal",{focusOnOpen:"#password",solid:!0});a.find(".errors").length&&c.open()}}});return b}();
$(document).ready(function(){(new theme.Sections).register("password-header",theme.PasswordHeader)});
